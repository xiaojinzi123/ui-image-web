<!DOCTYPE html>
<html>

<head>
    <title>Android Drawable Manager</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
          integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"/>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
            integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
            crossorigin="anonymous"></script>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <style type="text/css">
        * {
            padding: 0;
            margin: 0;
            word-wrap: break-word;
        }
    </style>

</head>
<body style="width: 100%;">

<nav class="navbar navbar-expand-lg navbar-light bg-faded" style="background-color: #e3f2fd;">

    <div class="collapse navbar-collapse" id="navbar_div1">
        <a class="nav-link" href="http://www.1hai.cn/" style="color: darkorchid" target="_blank">一嗨租车官网<span
                class="sr-only">(current)</span></a>

        <ul class="navbar-nav" id="navbar_ul_menu"><!--  mr-auto -->
            <!--<li class="nav-item">-->
            <!--<a class="nav-link" href="#">一嗨租车 App</a>-->
            <!--</li>-->
            <!--<li class="nav-item">-->
            <!--<a class="nav-link" href="#">司机Pad App</a>-->
            <!--</li>-->
        </ul>
    </div>

    <a style="color: cornflowerblue;" href="#">登录</a>

    <!--<a  style="color: cornflowerblue;margin-left: 10px;" href="#">注册</a>-->

</nav>

<br style="margin-top: 2px;"/>

<div style="display: flex;margin-left: 10px;margin-right: 10px;">

    <div style="width: 240px;">
        <!-- List group -->
        <div class="list-group" id="myList" role="tablist">
            <a class="list-group-item list-group-item-action active" data-toggle="list" href="#all" role="tab">all</a>
            <a class="list-group-item list-group-item-action" data-toggle="list" href="#home" role="tab">Home</a>
            <a class="list-group-item list-group-item-action" data-toggle="list" href="#profile" role="tab">Profile</a>
            <a class="list-group-item list-group-item-action" data-toggle="list" href="#messages"
               role="tab">Messages</a>
            <a class="list-group-item list-group-item-action" data-toggle="list" href="#settings"
               role="tab">Settings</a>
        </div>
    </div>

    <div id="div_img_container" class="container-fluid rounded" style="height: 850px;margin-left: 4px;">

        <div style="background: rgba(180,180,180,0.4);width :200px;height: 240px;float: left;margin-left: 4px;margin-bottom: 4px;border-style: solid; border-width: 0.5px;border-color: white;">

            <!--这个大小不能变,因为指示器的位置和这个高度有关-->
            <div id="carousel1" class="carousel slide" data-ride="carousel" data-interval="5000"
                 style="width :100%;height: 120px;">

                <ol class="carousel-indicators">

                    <li class="active" data-slide-to="0" data-target="#carousel1"></li>
                    <li data-slide-to="1" data-target="#carousel1"></li>

                </ol>

                <!--轮播图内部需要显示的东西-->
                <div class="carousel-inner">

                    <div class="carousel-item active" style="width :100%;height: 180px;text-align:center;">

                        <div style="width :100%;height: 120px;display: table-cell;vertical-align: middle;">

                            <img src="http://old.bz55.com/uploads/allimg/150210/139-150210134411-50.jpg"
                                 style="max-width: 100%;max-height: 100%;">

                        </div>

                        <div style="height: 60px;width: 100%;font-size: 14px;text-align: left;padding: 4px;">
                            folder：drawable-xhdpi-xhdpi-xhdpi-xhdpi
                        </div>

                    </div>

                    <div class="carousel-item" style="width :100%;height: 180px;text-align:center;">


                        <div style="width :200px;height: 120px;display: table-cell;vertical-align: middle;font-size: 12px;">

                            <img src="http://old.bz55.com/uploads/allimg/150210/139-150210134411-50.jpg"
                                 style="max-width: 100%;max-height: 100%;">

                        </div>

                        <div style="height: 60px;width: 100%;font-size: 14px;text-align: left;padding: 4px;">
                            folder：drawable-xhdpi-xhdpi-xhdpi-xhdpi
                        </div>

                    </div>

                </div>

                <a class="carousel-control-prev" role="button" href="#carousel1" data-slide="prev">

                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only"></span>

                </a>

                <a class="carousel-control-next" role="button" href="#carousel1" data-slide="next">

                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only"></span>

                </a>

            </div>

            <h4 class="card-title"
                style="width: 100%;height: 60px;margin-top: 60px;text-align: left;padding: 4px;font-size: 14px;">
                name：app_login_icon.png
            </h4>

        </div>

    </div>

</div>


</body>

<script type="text/javascript">

    var baseUrl = "http://localhost:8080/image/";

    function req(reqEntity, success, fail) {

        if (reqEntity.error == null) {
            reqEntity.error = function () {
                fail("未知错误,可能是请求失败或者是服务器异常");
            }
        }

        $.ajax(reqEntity).done(function (result) {
            // console.log(result)
            var resultObject = eval("(" + result + ")");
            if (resultObject.success) {
                if (success != null) {
                    success(resultObject.data);
                }
            } else {
                if (fail != null) {
                    fail(resultObject.msg);
                }
            }
        });
    }

    // 请求项目的数据
    req({url: baseUrl + "project/list"}, function (result) {

            $("#navbar_ul_menu").innerHTML = "";

            if (result == null || result.length == 0) {
                return
            }

            var len = result.length;

            for (var i = 0; i < len; i++) {

                var pro = result[i];

                $("#navbar_ul_menu")[0].innerHTML += "<li class='nav-item'><a class='nav-link' href='#' onclick='reqProImageList(" + pro.id + ")'>" + pro.name + "</a></li>"

            }

        }
    )

    function reqProImageList(proId) {


        req({url: baseUrl + "project/listImage?proId=" + proId}, function (result) {

                console.log(result)

                showImagesOfProject(result)

            }, function (msg) {
                alert(msg);
            }
        )


    }

    function showImagesOfProject(result) {

        var drawablesList = result.categories[0].drawablesList;

        var drawablesListLength = drawablesList.length;

        $("#div_img_container")[0].innerHTML = "";

        for (var i = 0; i < drawablesListLength; i++) {

            var div_carousel = createOneCarousel(drawablesList[i], "carousel" + i, i);

            // console.log(div_carousel);

            $("#div_img_container").append(div_carousel);

        }

    }

    function createOneCarousel(drawablesEntity, tag, count) {

        var drawables = drawablesEntity.drawables;

        var imageCount = drawables.length;

        var div_carousel_container = document.createElement("div");       // ========================== 0
        div_carousel_container.setAttribute("style", "background: rgba(200,200,200,0.4);width :240px;height: 240px;float: left;margin-left: 4px;margin-bottom: 4px;border-style: solid; border-width: 0.5px;border-color: white;");

        var div_carousel = document.createElement("div");       // ========================== 1

        div_carousel_container.appendChild(div_carousel);                  // ==========================1 -> 0

        div_carousel.setAttribute("id", tag);
        div_carousel.setAttribute("class", "carousel slide");
        div_carousel.setAttribute("data-ride", "carousel");
        div_carousel.setAttribute("data-interval", "0");
        div_carousel.setAttribute("style", "width :100%;height: 120px;");

        var ol_carousel = document.createElement("ol");         // ==========================1.1
        ol_carousel.setAttribute("class", "carousel-indicators");

        div_carousel.appendChild(ol_carousel);                  // ==========================1.1 -> 1

        for (var i = 0; i < imageCount; i++) {

            var li_carousel = document.createElement("li");
            if (i == 0) {
                li_carousel.setAttribute("class", "active");
            }
            li_carousel.setAttribute("data-slide-to", "" + i);
            li_carousel.setAttribute("data-target", "#" + tag);

            ol_carousel.appendChild(li_carousel);               // ==========================1.1.* -> 1.1

        }

        var div_carousel_inner = document.createElement("div"); // ==========================1.2
        div_carousel_inner.setAttribute("class", "carousel-inner");

        div_carousel.appendChild(div_carousel_inner);                  // ==========================1.2 -> 1

        for (var i = 0; i < imageCount; i++) {

            var div_carousel_inner_item = document.createElement("div"); // ==========================1.2.*
            if (i == 0) {
                div_carousel_inner_item.setAttribute("class", "carousel-item active");
            } else {
                div_carousel_inner_item.setAttribute("class", "carousel-item");
            }
            div_carousel_inner_item.setAttribute("style", "text-align:center;");

            var div_carousel_inner_item_item = document.createElement("div"); // ==========================1.2.*.1
            // 这个的这个width不能写100%,否则左右居中就不灵了
            div_carousel_inner_item_item.setAttribute("style", "width :240px;height: 120px;display: table-cell;vertical-align: middle;");

            var img_carousel_inner_item = document.createElement("img"); // ==========================1.2.*.1.*
            //img_carousel_inner_item.setAttribute("class", "d-block w-100 h-100");
            img_carousel_inner_item.setAttribute("style", "max-width: 100%;max-height: 100%;");
            img_carousel_inner_item.setAttribute("src", baseUrl + drawables[i].imagePath);

            div_carousel_inner_item_item.appendChild(img_carousel_inner_item); // ==========================1.2.*.1.* -> ==========================1.2.*.1
            div_carousel_inner_item.appendChild(div_carousel_inner_item_item); // ==========================1.2.*.1 -> ==========================1.2.*

            var div_carousel_inner_item_desc = document.createElement("div"); // ==========================1.2.*.2
            div_carousel_inner_item_desc.setAttribute("style", "height: 60px;width: 100%;font-size: 14px;text-align: left;padding: 4px;")

            div_carousel_inner_item_desc.innerText = "folder：" + drawables[i].drawableName;

            div_carousel_inner_item.appendChild(div_carousel_inner_item_desc); // ==========================1.2.*.2 -> ==========================1.2.*

            div_carousel_inner.appendChild(div_carousel_inner_item);    // ==========================1.2.* -> 1.2

        }

        var a_carousel_control_prev = document.createElement("a"); // ==========================1.3
        a_carousel_control_prev.setAttribute("class", "carousel-control-prev");
        a_carousel_control_prev.setAttribute("href", "#" + tag);
        a_carousel_control_prev.setAttribute("role", "button");
        a_carousel_control_prev.setAttribute("data-slide", "prev");

        var span_carousel_control_prev_icon = document.createElement("span"); // ==========================1.3.1
        span_carousel_control_prev_icon.setAttribute("class", "carousel-control-prev-icon");
        span_carousel_control_prev_icon.setAttribute("aria-hidden", "true");

        var span_carousel_control_prev = document.createElement("span"); // ==========================1.3.2
        span_carousel_control_prev.setAttribute("class", "sr-only");

        a_carousel_control_prev.appendChild(span_carousel_control_prev_icon); // ==========================1.3.1 -> 1.3
        a_carousel_control_prev.appendChild(span_carousel_control_prev); // ==========================1.3.2 -> 1.3

        div_carousel.appendChild(a_carousel_control_prev);                  // ==========================1.3 -> 1

        var a_carousel_control_next = document.createElement("a"); // ==========================1.4
        a_carousel_control_next.setAttribute("class", "carousel-control-next");
        a_carousel_control_next.setAttribute("href", "#" + tag);
        a_carousel_control_next.setAttribute("role", "button");
        a_carousel_control_next.setAttribute("data-slide", "next");

        var span_carousel_control_next_icon = document.createElement("span"); // ==========================1.4.1
        span_carousel_control_next_icon.setAttribute("class", "carousel-control-next-icon");
        span_carousel_control_next_icon.setAttribute("aria-hidden", "true");

        var span_carousel_control_next = document.createElement("span"); // ==========================1.4.2
        span_carousel_control_next.setAttribute("class", "sr-only");

        a_carousel_control_next.appendChild(span_carousel_control_next_icon); // ==========================1.4.1 -> 1.4
        a_carousel_control_next.appendChild(span_carousel_control_next); // ==========================1.4.2 -> 1.4

        div_carousel.appendChild(a_carousel_control_next);                  // ==========================1.4 -> 1

        var h4_drawable_desc = document.createElement("h4");                  // ==========================2
        h4_drawable_desc.setAttribute("style", "width: 100%;height: 60px;margin-top: 60px;text-align: left;padding: 4px;font-size: 14px;background: rgba(160,160,160,0.4);");
        h4_drawable_desc.setAttribute("class", "card-title");
        h4_drawable_desc.innerText = "name：" + drawablesEntity.drawableName;

        div_carousel_container.appendChild(h4_drawable_desc);                  // ==========================2 -> 0

        return div_carousel_container;


    }


</script>

</html>